
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arka Investment Calculator</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap" rel="stylesheet">
    <style>
        body {
            margin-top: 60px;
            font-family: "Plus Jakarta Sans", sans-serif;

        }
        .color{
            color: #2F288B !important;
        }
        .background{
            background-image: url("Background.png");
             background-position: center; 
              background-repeat: no-repeat;
              background-size: cover; 

              background-color: #fff;

        }
         .background-2{
            background-image: url("ipad.png");
             background-position: center; 
              background-repeat: no-repeat;
              background-size: contain;
              padding: 32px;

        }
        .background-3{
            background-image: url("bg3.png");
             background-position: left; 
              background-repeat: no-repeat;
              background-size: contain;
                  height: 84px;


        }
        .h1{
            color: var(--Color, #000);
                font-family: "Plus Jakarta Sans";
                font-size: 36px;
                font-style: normal;
                font-weight: 800;
                line-height: 150%; /* 54px */
        }
        .p{
            color: #222;
            font-family: "Plus Jakarta Sans";
            font-size: 16.875px;
            font-style: normal;
            font-weight: 400;
            line-height: 30.01px; /* 177.837% */
        }
        .container {
        max-width: 1300px !important;
    }
    .canvas{
        display: block;
    box-sizing: border-box;
    height: 300px;
    width: 840px;
    }
    .comp{
        padding: 12px 10px;
        width: 18%;
    }
    </style>
</head>
<body class="background">
<div class="container">
    <div class="row">
        <div class="col-md-3">
            <img src="ic_p.png" width="64px">
            <h1 class="h1">
               Descubre cuánto podría Crecer tu Dinero 
            </h1>
            <p class="p">
                Descubre la magia del interés compuesto. Puedes comprobar tu potencial de inversión y rendimientos ingresando un depósito inicial, el monto de las contribuciones y la frecuencia de las mismas.
            </p>
        </div>    
        
        <div class="col-md-9 background-2">
        <div class="col-md-12 background-3" style="display: inline-flex;">
            <div class="comp">
            <div>Total Principal</div>
            <div class="h3" id="total_principal">?</div>
            </div>
            <div class="comp">
            <div>Future Balance</div>
            <div class="h3" id="future_balance">?</div>
            </div>
        </div>
        <div class="col-md-12">
            <canvas id="myChart"></canvas>
        </div>
        <div class="col-md-12" style="display:inline-flex;">
        <div class="col-md-6">
             <div class="form-group">
                <label for="estimated_return">% Porcentaje de Rendimiento Anual</label>
                <div class="row">
                    <div class="input-group col-md-6 col-sm-8">
                        <!-- <div class="input-group-prepend">
                            <button class="btn btn-primary" type="button" data-counter="sub" data-field="estimated_return">&minus;</button>
                        </div> -->
                        <input class="form-control text-center" id="estimated_return" type="text" name="estimated_return" min="0" max="50" step="0.25" value="5.00%" data-value="5.00" data-append="%">
                        <!-- <div class="input-group-append">
                            <button class="btn btn-primary" type="button" data-counter="add" data-field="estimated_return">&plus;</button>
                        </div> -->
                    </div>
                </div>
            </div>   
             <div class="form-group">
                <label for="initial_deposit">Initial Deposit</label>
                <div class="row">
                    <div class="input-group col-md-6 col-sm-8">
                        <!-- <div class="input-group-prepend">
                            <button class="btn btn-primary" type="button" data-counter="sub" data-field="initial_deposit">&minus;</button>
                        </div> -->
                        <input class="form-control text-center" id="initial_deposit" type="text" name="initial_deposit" min="100" max="1000000" step="100" value="$5000" data-value="5000" data-prepend="$">
                        <!-- <div class="input-group-append">
                            <button class="btn btn-primary" type="button" data-counter="add" data-field="initial_deposit">&plus;</button>
                        </div> -->
                    </div>
                </div>
            </div>
               

        </div>
        <div class="col-md-6">
            <div class="col-md-6">
            <div class="form-group">
                <label for="contribution_amount">Contributions</label>
                <div class="row">
                    <div class="input-group col-md-6 col-sm-8">
                        <!-- <div class="input-group-prepend">
                            <button class="btn btn-primary" type="button" data-counter="sub" data-field="contribution_amount">&minus;</button>
                        </div> -->
                        <input class="form-control text-center" id="contribution_amount" type="text" name="contribution_amount" min="0" max="10000" step="50" value="$100" data-value="100" data-prepend="$">
                        <!-- <div class="input-group-append">
                            <button class="btn btn-primary" type="button" data-counter="add" data-field="contribution_amount">&plus;</button>
                        </div> -->
                    </div>
                </div>
                <div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" id="contribution_period_monthly" type="radio" name="contribution_period" value="12" checked>
                    <label class="form-check-label" for="contribution_period_monthly">monthly</label>
                </div>

                <div class="form-check form-check-inline">
                    <input class="form-check-input" id="contribution_period_annually" type="radio" name="contribution_period" value="1">
                    <label class="form-check-label" for="contribution_period_annually">annually</label>
                </div>
                </div>
            </div>
            </div>
            <div class="col-md-6">
                <div class="form-group row">
                <div class="col-sm-12">
                    <div>Compound Frequency</div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" id="compound_period_daily" type="radio" name="compound_period" value="365">
                        <label class="form-check-label" for="compound_period_daily">daily</label>
                    </div>

                    <div class="form-check form-check-inline">
                        <input class="form-check-input" id="compound_period_monthly" type="radio" name="compound_period" value="12" checked>
                        <label class="form-check-label" for="compound_period_monthly">monthly</label>
                    </div>

                    <div class="form-check form-check-inline">
                        <input class="form-check-input" id="compound_period_annually" type="radio" name="compound_period" value="1">
                        <label class="form-check-label" for="compound_period_annually">annually</label>
                    </div>
                </div>
            </div>
            </div> 
            <div class="form-group">
                <label for="investment_timespan">Investment Time Span</label>
                <div class="row">
                    <div class="col-md-6 col-sm-8">
                        <input class="form-control" id="investment_timespan" type="range" name="investment_timespan" min="2" max="50" step="1" value="30">
                    </div>
                </div>
                <span id="investment_timespan_text">30 years</span>
            </div>


            
        </div>
        </div>
        </div>
    </div>
</div>

<script>
(function () {
    var initial_deposit = document.querySelector('#initial_deposit'),
        contribution_amount = document.querySelector('#contribution_amount'),
        investment_timespan = document.querySelector('#investment_timespan'),
        investment_timespan_text = document.querySelector('#investment_timespan_text'),
        estimated_return = document.querySelector('#estimated_return'),
        future_balance = document.querySelector('#future_balance'),
        total_principal = document.querySelector('#total_principal');

    function updateValue(element, action) {
        var min = parseFloat(element.getAttribute('min')),
            max = parseFloat(element.getAttribute('max')),
            step = parseFloat(element.getAttribute('step')) || 1,
            oldValue = element.dataset.value || element.defaultValue || 0,
            newValue = parseFloat(element.value.replace(/\$/, ''));

        if (isNaN(parseFloat(newValue))) {
            newValue = oldValue;
        } else {
            if (action == 'add') {
                newValue += step;
            } else if (action == 'sub') {
                newValue -= step;
            }

            newValue = newValue < min ? min : newValue > max ? max : newValue;
        }

        element.dataset.value = newValue;
        element.value = (element.dataset.prepend || '') + newValue + (element.dataset.append || '');

        updateChart();
    }

    function getChartData() {
        var P = parseFloat(initial_deposit.dataset.value), // Principal
            r = parseFloat(estimated_return.dataset.value / 100), // Annual Interest Rate
            c = parseFloat(contribution_amount.dataset.value), // Contribution Amount
            n = parseInt(document.querySelector('[name="compound_period"]:checked').value), // Compound Period
            n2 = parseInt(document.querySelector('[name="contribution_period"]:checked').value), // Contribution Period
            t = parseInt(investment_timespan.value), // Investment Time Span
            currentYear = (new Date()).getFullYear();

        var labels = [];
        for (var year = currentYear; year < currentYear + t; year++) {
            labels.push(year);
        }

        var principal_dataset = {
            label: 'Total Principal',
            backgroundColor: 'rgba(0, 123, 255, 0.5)',
            borderColor: 'rgb(0, 123, 255)',
            fill: true,
            data: []
        };

        var interest_dataset = {
            label: "Total Interest",
            backgroundColor: 'rgba(23, 162, 184, 0.5)',
            borderColor: 'rgb(23, 162, 184)',
            fill: true,
            data: []
        };

        var totalPrincipal = 0;

        for (var i = 1; i <= t; i++) {
            var principal = P + (c * n2 * i),
                interest = 0,
                balance = principal;

            totalPrincipal = principal;

            if (r) {
                var x = Math.pow(1 + r / n, n * i),
                    compound_interest = P * x,
                    contribution_interest = c * (x - 1) / (r / n2);
                interest = (compound_interest + contribution_interest - principal).toFixed(0)
                balance = (compound_interest + contribution_interest).toFixed(0);
            }

            future_balance.innerHTML = '$' + balance;
            principal_dataset.data.push(principal);
            interest_dataset.data.push(interest);
        }

        total_principal.innerHTML = '$' +

 totalPrincipal;

        return {
            labels: labels,
            datasets: [principal_dataset, interest_dataset]
        };
    }

    function updateChart() {
        if (myChart) {
            myChart.data = getChartData();
            myChart.update();
        }
    }

    var myChart = new Chart(document.getElementById('myChart').getContext('2d'), {
        type: 'line',
        data: getChartData(),
        options: {
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: true,
                        callback: function (value) {
                            return '$' + value.toLocaleString();
                        }
                    }
                }]
            },
            tooltips: {
                callbacks: {
                    label: function (tooltipItem, data) {
                        return data.datasets[tooltipItem.datasetIndex].label + ': $' + tooltipItem.yLabel.toLocaleString();
                    }
                }
            }
        }
    });

    investment_timespan.addEventListener('input', function () {
        investment_timespan_text.innerHTML = investment_timespan.value + ' years';
        updateChart();
    });

    document.querySelectorAll('[data-counter]').forEach(function (element) {
        element.addEventListener('click', function () {
            updateValue(document.querySelector('[name="' + element.dataset.field + '"]'), element.dataset.counter);
        });
    });

    document.querySelectorAll('[data-field]').forEach(function (element) {
        element.addEventListener('change', function () {
            updateValue(element, 'update');
        });
    });

    document.querySelectorAll('[name="compound_period"], [name="contribution_period"]').forEach(function (element) {
        element.addEventListener('change', updateChart);
    });
})();
</script>
</body>
</html>
